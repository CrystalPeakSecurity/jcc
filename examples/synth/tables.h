// tables.h - Lookup tables for FM synthesis

#ifndef TABLES_H
#define TABLES_H

static const short SINE_256[256] = {
    0,    3,    6,    9,    12,   15,   18,   21,   24,   27,   30,   33,
    36,   39,   42,   45,   48,   51,   54,   57,   59,   62,   65,   67,
    70,   73,   75,   78,   80,   82,   85,   87,   89,   91,   94,   96,
    98,   100,  102,  103,  105,  107,  108,  110,  112,  113,  114,  116,
    117,  118,  119,  120,  121,  122,  123,  123,  124,  125,  125,  126,
    126,  126,  126,  127,  127,  127,  126,  126,  126,  126,  125,  125,
    124,  123,  123,  122,  121,  120,  119,  118,  117,  116,  114,  113,
    112,  110,  108,  107,  105,  103,  102,  100,  98,   96,   94,   91,
    89,   87,   85,   82,   80,   78,   75,   73,   70,   67,   65,   62,
    59,   57,   54,   51,   48,   45,   42,   39,   36,   33,   30,   27,
    24,   21,   18,   15,   12,   9,    6,    3,    0,    -3,   -6,   -9,
    -12,  -15,  -18,  -21,  -24,  -27,  -30,  -33,  -36,  -39,  -42,  -45,
    -48,  -51,  -54,  -57,  -59,  -62,  -65,  -67,  -70,  -73,  -75,  -78,
    -80,  -82,  -85,  -87,  -89,  -91,  -94,  -96,  -98,  -100, -102, -103,
    -105, -107, -108, -110, -112, -113, -114, -116, -117, -118, -119, -120,
    -121, -122, -123, -123, -124, -125, -125, -126, -126, -126, -126, -127,
    -127, -127, -126, -126, -126, -126, -125, -125, -124, -123, -123, -122,
    -121, -120, -119, -118, -117, -116, -114, -113, -112, -110, -108, -107,
    -105, -103, -102, -100, -98,  -96,  -94,  -91,  -89,  -87,  -85,  -82,
    -80,  -78,  -75,  -73,  -70,  -67,  -65,  -62,  -59,  -57,  -54,  -51,
    -48,  -45,  -42,  -39,  -36,  -33,  -30,  -27,  -24,  -21,  -18,  -15,
    -12,  -9,   -6,   -3};

short getSine(short phase) { return SINE_256[phase & 0xFF]; }

// phase_inc = frequency * 65536 / 8000 (at 8kHz sample rate)
static const short NOTE_PHASE_INC[128] = {
    66,    70,    75,    79,    84,    89,    94,    100,   106,   112,   119,
    126,   133,   141,   150,   159,   168,   178,   189,   200,   212,   225,
    238,   252,   267,   283,   300,   318,   337,   357,   378,   401,   425,
    450,   477,   505,   535,   567,   601,   637,   675,   715,   757,   802,
    850,   901,   954,   1011,  1071,  1135,  1202,  1274,  1350,  1430,  1515,
    1605,  1701,  1802,  1909,  2022,  2143,  2270,  2405,  2548,  2700,  2860,
    3030,  3211,  3402,  3604,  3818,  4045,  4286,  4541,  4811,  5097,  5400,
    5721,  6061,  6422,  6804,  7208,  7637,  8091,  8572,  9082,  9622,  10195,
    10801, 11443, 12123, 12844, 13608, 14417, 15275, 16183, 17145, 18165, 19245,
    20390, 21602, 22887, 24247, 25689, 27217, 28835, 30550, 32367, 32767, 32767,
    32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767,
    32767, 32767, 32767, 32767, 32767, 32767, 32767};

// Fixed-point 8.8 multipliers (multiply phase_inc, then >> 8)
static const short MULT_TABLE[16] = {128,  256,  512,  768,  1024, 1280,
                                     1536, 1792, 2048, 2304, 2560, 2560,
                                     3072, 3072, 3840, 3840};

#endif // TABLES_H
