// tables.h - Trig Tables for DOOM JavaCard Port
//
// JDOOM Reference: util/math/TableData.java
// Ported from jdoom's TableData.java compressed table arrays
// Reduced tables: ~3,400 bytes (was ~12,000 bytes)
//
// All array data matches JDOOM TableData.java exactly (byte-for-byte).
// See TableData.java for compression scheme documentation.

#pragma once

#include "jcc.h"

// =============================================================================
// FINETANGENT: Antisymmetry + Variable-frequency piecewise linear
// JDOOM: TableData.java:7-203 (data arrays)
// Storage: 64 anchors + 64 avg_deltas + 448 offsets = 960 bytes
// =============================================================================

// JDOOM: TableData.java:13-46 - FINETANGENT_ANCHORS (256 elements)
const int FINETANGENT_ANCHORS[] = {
    -170910304, -10052327, -5178251, -3487165, -2628549, -2109087, -1760956,
    -1511367,   -1323658,  -1177345, -1060087, -964003,  -883829,  -815910,
    -757631,    -707072,   -662792,  -623686,  -588896,  -557741,  -529680,
    -504269,    -481150,   -460024,  -440643,  -422798,  -406311,  -391034,
    -376835,    -363604,   -351244,  -339671,  -328812,  -291322,  -261209,
    -236463,    -215745,   -198125,  -182939,  -169701,  -158046,  -147693,
    -138426,    -130073,   -122496,  -115583,  -109245,  -103404,  -98000,
    -92978,     -88294,    -83910,   -79793,   -75915,   -72252,   -68781,
    -65485,     -53741,    -43753,   -34997,   -27116,   -19852,   -13009,
    -6429,
};

// JDOOM: TableData.java:51-84 - FINETANGENT_AVG_DELTAS (256 elements)
const int FINETANGENT_AVG_DELTAS[] = {
    151922268, 3216872, 1010514, 489552, 288187, 189709, 134298, 100055,
    77424,     61691,   50313,   41817,  35309,  30211,  26145,  22849,
    20141,     17888,   15995,   14387,  13013,  11826,  10795,  9895,
    9103,      8403,    7781,    7227,   6730,   6283,   5880,   5514,
    4751,      3810,    3127,    2616,   2223,   1914,   1668,   1467,
    1303,      1165,    1050,    952,    868,    796,    733,    678,
    630,       588,     550,     516,    486,    459,    435,    413,
    367,       312,     274,     246,    227,    214,    205,    201,
};

// JDOOM: TableData.java:89-202 - FINETANGENT_OFFSETS (1792 elements)
const byte FINETANGENT_OFFSETS[] = {
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   432, 709, 838, 825, 678, 402, 1,   308, 507, 600, 593, 490, 293,
    6,   227, 374, 444, 440, 364, 219, 6,   171, 283, 336, 333, 275, 164, 2,
    133, 220, 261, 259, 214, 128, 2,   106, 175, 209, 208, 173, 105, 5,   85,
    140, 166, 165, 136, 81,  0,   70,  116, 138, 138, 115, 71,  5,   57,  95,
    113, 112, 93,  56,  1,   48,  81,  97,  97,  82,  52,  6,   41,  68,  81,
    81,  68,  42,  4,   35,  58,  70,  70,  59,  37,  5,   31,  51,  61,  61,
    52,  34,  6,   26,  43,  52,  52,  43,  27,  3,   23,  38,  46,  47,  40,
    26,  5,   20,  33,  40,  41,  35,  23,  5,   18,  30,  36,  36,  31,  20,
    4,   15,  25,  30,  30,  25,  15,  0,   14,  23,  28,  28,  23,  14,  1,
    13,  21,  26,  26,  23,  15,  4,   11,  19,  23,  23,  20,  13,  3,   10,
    17,  21,  21,  18,  12,  3,   9,   15,  18,  18,  16,  10,  2,   8,   13,
    16,  16,  14,  9,   2,   33,  64,  93,  120, 144, 165, 185, 202, 217, 230,
    240, 248, 255, 259, 261, 261, 259, 255, 249, 241, 231, 219, 205, 190, 172,
    153, 132, 109, 84,  58,  29,  23,  45,  65,  83,  100, 115, 129, 141, 152,
    161, 168, 174, 179, 182, 183, 184, 182, 180, 176, 170, 164, 156, 146, 135,
    123, 110, 96,  80,  63,  44,  25,  16,  31,  45,  57,  69,  79,  88,  96,
    103, 109, 114, 118, 121, 123, 123, 123, 122, 119, 116, 112, 106, 100, 93,
    85,  76,  66,  55,  44,  31,  18,  3,   12,  23,  34,  43,  52,  60,  67,
    73,  78,  83,  87,  90,  93,  95,  96,  96,  96,  95,  93,  90,  87,  83,
    79,  73,  68,  61,  54,  46,  38,  29,  19,  8,   16,  23,  29,  35,  40,
    45,  49,  53,  56,  59,  61,  62,  63,  64,  64,  63,  62,  61,  59,  56,
    53,  50,  46,  42,  37,  32,  26,  20,  14,  7,   5,   10,  15,  19,  22,
    26,  29,  31,  34,  35,  37,  38,  39,  39,  39,  39,  39,  38,  37,  35,
    33,  31,  29,  26,  23,  20,  17,  13,  9,   4,   0,   4,   7,   11,  14,
    17,  19,  22,  24,  26,  28,  29,  30,  32,  33,  33,  34,  34,  34,  34,
    34,  34,  33,  33,  32,  31,  30,  29,  27,  26,  24,  22,  2,   4,   6,
    7,   9,   10,  11,  13,  14,  15,  16,  16,  17,  18,  19,  19,  20,  20,
    20,  21,  21,  21,  22,  22,  22,  22,  22,  22,  22,  23,  23,
};

// =============================================================================
// FINESINE: 4-quarter sine with exception handling
// JDOOM: TableData.java:205-385 (data arrays)
// Storage: 128 anchors + 384 deltas = 1280 bytes
// =============================================================================

// JDOOM: TableData.java:207-272 - FINESINE_ANCHORS (512 elements)
const int FINESINE_ANCHORS[] = {
    25,    829,   1633,  2437,  3240,  4043,  4846,  5647,  6448,  7248,  8047,
    8844,  9640,  10435, 11228, 12020, 12810, 13597, 14383, 15167, 15948, 16727,
    17503, 18277, 19048, 19816, 20581, 21343, 22102, 22857, 23609, 24357, 25102,
    25843, 26580, 27313, 28042, 28767, 29488, 30204, 30915, 31622, 32324, 33021,
    33713, 34400, 35082, 35759, 36430, 37096, 37756, 38411, 39059, 39702, 40339,
    40970, 41595, 42213, 42825, 43430, 44029, 44622, 45207, 45786, 46358, 46923,
    47481, 48032, 48575, 49112, 49640, 50162, 50675, 51182, 51680, 52171, 52653,
    53128, 53595, 54054, 54505, 54947, 55381, 55807, 56225, 56633, 57034, 57426,
    57809, 58183, 58549, 58906, 59254, 59593, 59923, 60244, 60556, 60859, 61153,
    61438, 61713, 61979, 62236, 62483, 62721, 62949, 63168, 63378, 63578, 63768,
    63949, 64120, 64281, 64433, 64575, 64707, 64830, 64943, 65046, 65139, 65222,
    65296, 65360, 65414, 65458, 65492, 65516, 65531,
};

// JDOOM: TableData.java:277-375 - FINESINE_DELTAS (1538 elements)
const short FINESINE_DELTAS[] = {
    201, 402, 603, 201, 402, 603, 201, 402, 603, 201, 402, 602, 201, 402, 603,
    201, 402, 602, 200, 401, 601, 201, 401, 601, 200, 400, 600, 200, 400, 599,
    199, 399, 598, 199, 399, 598, 199, 398, 597, 199, 397, 595, 198, 396, 594,
    198, 395, 592, 197, 394, 591, 197, 393, 590, 196, 392, 588, 195, 390, 586,
    195, 390, 584, 194, 388, 582, 194, 387, 581, 193, 386, 578, 192, 384, 576,
    191, 383, 574, 191, 381, 572, 190, 380, 569, 189, 378, 566, 188, 376, 564,
    187, 375, 562, 187, 373, 559, 186, 371, 556, 185, 369, 553, 184, 367, 551,
    183, 365, 548, 182, 363, 544, 181, 361, 541, 179, 358, 537, 178, 356, 534,
    177, 354, 531, 176, 352, 527, 175, 349, 523, 174, 347, 520, 173, 344, 516,
    171, 342, 512, 170, 339, 508, 168, 336, 504, 167, 334, 500, 166, 331, 496,
    164, 328, 492, 162, 325, 487, 162, 323, 483, 160, 319, 478, 158, 316, 474,
    157, 313, 469, 155, 309, 464, 153, 307, 459, 152, 303, 455, 151, 301, 450,
    149, 297, 445, 147, 293, 440, 146, 291, 435, 144, 287, 430, 142, 284, 425,
    140, 280, 419, 138, 276, 414, 136, 273, 408, 135, 269, 403, 132, 265, 397,
    131, 262, 392, 129, 258, 386, 128, 254, 381, 125, 250, 374, 123, 246, 369,
    121, 242, 363, 120, 239, 357, 118, 235, 351, 116, 231, 345, 113, 226, 339,
    111, 222, 332, 109, 218, 327, 108, 214, 320, 105, 210, 314, 103, 205, 307,
    101, 202, 302, 99,  197, 295, 96,  192, 288, 94,  188, 282, 93,  184, 276,
    90,  180, 269, 88,  175, 262, 86,  171, 255, 84,  166, 249, 81,  162, 242,
    79,  158, 235, 77,  153, 229, 75,  148, 222, 72,  144, 214, 69,  139, 207,
    67,  134, 200, 65,  129, 193, 62,  124, 186, 60,  120, 179, 58,  115, 172,
    56,  111, 165, 53,  106, 158, 51,  101, 150, 48,  96,  143, 46,  91,  136,
    43,  86,  129, 41,  82,  122, 39,  77,  115, 36,  72,  107, 34,  67,  100,
    32,  63,  93,  29,  57,  85,  26,  52,  78,  24,  48,  71,  22,  43,  63,
    20,  38,  57,  17,  33,  49,  14,  28,  41,  12,  23,  34,  9,   18,  26,
    7,   13,  19,  5,   9,   12,  2,   3,   4,
};

// FINESINE_EXCEPTIONS removed - not needed for reduced tables

// =============================================================================
// TANTOANGLE: Slope to angle lookup (32-element segments)
// JDOOM: TableData.java:387-544 (data arrays)
// Storage: 17 anchors + 17 avg_deltas + 496 offsets = 1128 bytes
// =============================================================================

// JDOOM: TableData.java:389-399 - TANTOANGLE_ANCHORS (65 elements)
const int TANTOANGLE_ANCHORS[] = {
    0,         42667331,  85004756,  126697422, 167458907, 207041578,
    245243172, 281909457, 316933405, 350251642, 381839094, 411702715,
    439875012, 466407903, 491367226, 514828062, 536870912,
};

// JDOOM: TableData.java:404-414 - TANTOANGLE_AVG_DELTAS (65 elements)
const int TANTOANGLE_AVG_DELTAS[] = {
    1333460, 1323308, 1303305, 1274334, 1237602, 1194527,
    1146609, 1095323, 1042038, 987953,  934071,  881194,
    829933,  780723,  733857,  689504,  0,
};

// JDOOM: TableData.java:419-544 - TANTOANGLE_OFFSETS (1984 elements)
const short TANTOANGLE_OFFSETS[] = {
    1626,   3243,   4839,   6405,   7929,   9403,   10816,  12158,  13418,
    14587,  15653,  16608,  17441,  18141,  18699,  19105,  19348,  19418,
    19305,  18999,  18490,  17768,  16823,  15644,  14222,  12547,  10608,
    8395,   5899,   3110,   17,     6422,   12511,  18256,  23648,  28678,
    33334,  37607,  41488,  44966,  48032,  50676,  52888,  54658,  55977,
    56835,  57222,  57129,  56545,  55462,  53870,  51758,  49119,  45941,
    42215,  37933,  33084,  27659,  21649,  15045,  7836,   14,     10926,
    21211,  30845,  39820,  48125,  55753,  62694,  68939,  74478,  79303,
    83405,  86775,  89404,  91282,  92402,  92754,  92330,  91120,  89116,
    86310,  82692,  78255,  72988,  66885,  59936,  52133,  43467,  33930,
    23514,  12210,  10,     14954,  28988,  42092,  54260,  65482,  75751,
    85059,  93398,  100760, 107137, 112521, 116905, 120280, 122639, 123975,
    124279, 123544, 121762, 118927, 115030, 110063, 104021, 96894,  88677,
    79361,  68940,  57406,  44752,  30971,  16057,  1,      18373,  35584,
    51627,  66495,  80180,  92676,  103977, 114076, 122966, 130640, 137093,
    142318, 146309, 149058, 150561, 150810, 149799, 147523, 143974, 139148,
    133038, 125638, 116942, 106944, 95639,  83020,  69082,  53819,  37226,
    19296,  25,     21104,  40850,  59233,  76246,  91886,  106147, 119023,
    130509, 140600, 149292, 156579, 162456, 166919, 169962, 171581, 171770,
    170526, 167843, 163718, 158144, 151118, 142635, 132691, 121282, 108402,
    94048,  78216,  60901,  42099,  21806,  17,     23127,  44747,  64856,
    83450,  100526, 116079, 130105, 142602, 153566, 162992, 170878, 177220,
    182014, 185257, 186946, 187077, 185647, 182653, 178092, 171960, 164255,
    154973, 144111, 131667, 117637, 102019, 84809,  66006,  45606,  23606,
    4,      24471,  47333,  68582,  88217,  106234, 122631, 137406, 150557,
    162081, 171977, 180241, 186873, 191869, 195228, 196947, 197026, 195461,
    192251, 187394, 180889, 172733, 162924, 151462, 138344, 123569, 107135,
    89041,  69285,  47865,  24781,  30,     25198,  48726,  70583,  90767,
    109277, 126112, 141271, 154753, 166557, 176682, 185127, 191891, 196973,
    200372, 202087, 202118, 200464, 197124, 192098, 185384, 176982, 166892,
    155113, 141645, 126486, 109637, 91097,  70866,  48943,  25328,  21,
    25392,  49092,  71098,  91411,  110030, 126956, 142188, 155726, 167571,
    177722, 186179, 192943, 198013, 201391, 203075, 203066, 201365, 197971,
    192885, 186107, 177638, 167477, 155626, 142084, 126853, 109932, 91322,
    71023,  49037,  25363,  3,      25150,  48615,  70396,  90494,  108909,
    125642, 140693, 154065, 165756, 175770, 184105, 190763, 195746, 199053,
    200686, 200646, 198934, 195551, 190498, 183776, 175386, 165330, 153607,
    140221, 125170, 108458, 90085,  70052,  48361,  25012,  8,      24565,
    47478,  68740,  88354,  106319, 122638, 137312, 150343, 161732, 171480,
    179589, 186060, 190896, 194097, 195665, 195602, 193910, 190589, 185641,
    179069, 170874, 161058, 149621, 136567, 121896, 105610, 87712,  68203,
    47084,  24357,  25,     23723,  45846,  66370,  85298,  102630, 118371,
    132520, 145080, 156054, 165442, 173247, 179471, 184116, 187184, 188677,
    188596, 186944, 183723, 178935, 172582, 164666, 155189, 144154, 131561,
    117414, 101715, 84465,  65667,  45323,  23435,  5,      22703,  43871,
    63506,  81610,  98185,  113234, 126759, 138762, 149245, 158211, 165661,
    171599, 176025, 178944, 180356, 180265, 178672, 175580, 170991, 164908,
    157332, 148267, 137714, 125676, 112155, 97153,  80674,  62718,  43290,
    22390,  22,     21568,  41674,  60322,  77513,  93249,  107534, 120370,
    131759, 141703, 150205, 157268, 162893, 167084, 169843, 171172, 171074,
    169551, 166605, 162240, 156457, 149259, 140649, 130629, 119202, 106369,
    92134,  76499,  59467,  41039,  21220,  10,     20371,  39360,  56968,
    73199,  88055,  101539, 113653, 124400, 133782, 141801, 148461, 153764,
    157712, 160308, 161555, 161454, 160009, 157222, 153096, 147632, 140835,
    132705, 123246, 112461, 100351, 86920,  72170,  56103,  38722,  20030,
    29,
};
